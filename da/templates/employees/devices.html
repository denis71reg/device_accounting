{% extends "base.html" %}
{% block title %}Девайсы {{ employee.full_name }} · DA{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h3 class="mb-1" style="color: #2c3e50; font-weight: 600;">
            <i class="bi bi-laptop me-2"></i>Девайсы сотрудника
        </h3>
        <p class="text-muted mb-0">
            <a href="{{ url_for('employees.list_employees') }}" class="text-decoration-none">
                <i class="bi bi-arrow-left me-1"></i>Вернуться к списку сотрудников
            </a>
        </p>
    </div>
</div>

<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title mb-3" style="color: #2c3e50;">{{ employee.full_name }}</h5>
        <div class="row">
            <div class="col-md-6">
                <p class="mb-1"><strong>Должность:</strong> {{ employee.position }}</p>
                <p class="mb-1"><strong>Email:</strong> {{ employee.email }}</p>
                <p class="mb-1"><strong>Телефон:</strong> {{ employee.phone }}</p>
            </div>
            <div class="col-md-6">
                {% if employee.telegram %}
                <p class="mb-1"><strong>Telegram:</strong> {{ employee.telegram }}</p>
                {% endif %}
                <p class="mb-1"><strong>Локация:</strong> {{ employee.location.name if employee.location else '—' }}</p>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header" style="background-color: #f8f9fa; border-bottom: 1px solid #dee2e6;">
        <h5 class="mb-0" style="color: #2c3e50;">
            Список девайсов ({{ devices|length }})
        </h5>
    </div>
    <div class="card-body p-0">
        {% if devices %}
        <table class="table table-hover mb-0 align-middle">
            <thead class="text-uppercase small" style="background-color: #f8f9fa;">
                <tr>
                    <th class="ps-4" style="color: #2c3e50;">Инв. номер</th>
                    <th style="color: #2c3e50;">Модель</th>
                    <th style="color: #2c3e50;">Тип</th>
                    <th style="color: #2c3e50;">Склад</th>
                    <th style="color: #2c3e50;">Статус</th>
                    <th class="text-end pe-4" style="color: #2c3e50;">Действия</th>
                </tr>
            </thead>
            <tbody>
            {% for device in devices %}
                <tr>
                    <td class="ps-4 fw-semibold" style="color: #2c3e50;">{{ device.inventory_number }}</td>
                    <td style="color: #5a6c7d;">{{ device.model }}</td>
                    <td style="color: #5a6c7d;">{{ device.type.name }}</td>
                    <td style="color: #5a6c7d;">
                        {% if device.warehouse %}
                            {{ device.warehouse.name }}
                        {% else %}
                            <span class="text-muted">—</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if device.status.value == 'assigned' %}
                            <span class="badge bg-success">Назначен</span>
                        {% elif device.status.value == 'in_stock' %}
                            <span class="badge bg-secondary">На складе</span>
                        {% elif device.status.value == 'retired' %}
                            <span class="badge bg-danger">Списан</span>
                        {% else %}
                            <span class="badge bg-secondary">{{ device.status.value }}</span>
                        {% endif %}
                    </td>
                    <td class="text-end pe-4">
                        <a href="{{ url_for('devices.edit_device', device_id=device.id) }}" 
                           class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-pencil"></i>
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="text-center py-5">
            <i class="bi bi-laptop" style="font-size: 3rem; color: #95a5a6;"></i>
            <p class="mt-3 mb-0" style="color: #95a5a6;">У сотрудника нет назначенных девайсов</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}




